<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head profile="http://www.w3.org/2000/08/w3c-synd/#">
  <link rel="stylesheet" href="attachments/site.css" type="text/css"/>
  <link rel="shortcut icon" href="attachments/favicon.ico"/>
  <link rel="icon" type="image/x-icon" href="attachments/favicon.ico"/>

  <title>Codehaus Cargo - Custom File Configurations</title>

  <script type="text/javascript">
    // Google Analytics code

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-31476258-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</head>

<body>
  <table width="100%" id="layout" style="padding:0px;margin0px;border-collapse:collapse;">
    <tr>
      <td colspan="2" style="padding:8px;">
        <table width="100%" id="banner" style="padding:0px;margin:0px">
          <tr id="header_row">
            <td align="left" valign="middle" style="padding:0px;margin:0px;">
              <img src="attachments/cargo-banner-left.png"/>
            </td>
            <td align="right" valign="middle" style="padding:0px;margin:0px;">
              <img src="attachments/cargo-banner-right.png"/>
            </td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td colspan="2" id="breadcrumbs">
        <!--
        <table width="100%" id="banner" style="padding:0px;margin:0px">
          <tr>
            <td align="left">
              <p>
                <a href="/">Home</a>
                #if ($page.pageKey != "Home")
                  #foreach($breadcrumb in $breadcrumbs)
                    &gt; <a href="/${breadcrumb.pageKeyEncoded}">${breadcrumb.pageKey}</a>
                  #end
                #end
              </p>
            </td>
            <td align="left">
              #if (${quicklinksFragment})
                ${quicklinksFragment}
              #end
            </td>
            <td align="right">
              <a href="/${page.pageKeyEncoded}?print=1" style="color:#999;font-size:small">
                <img src="attachments/print.gif" border="0" alt="Printable version" title="Printable version">
              </a>
            </td>
          </tr>
        </table>
         -->
      </td>
    </tr>
    <tr>
      <td id="leftColumn" valign="top" style="padding-top: 0px;">
          <h3 id="Navigation-QuickLinks">Quick Links</h3><ul class="alternate"><li><a href="Home.html">Home</a></li><li><a href="Downloads.html">Downloads</a></li><li><a href="Quick+start.html">Quick start</a></li><li><a href="Contributing.html">How to contribute?</a><ul class="alternate"><li><a href="Adding+a+container.html">Adding a container</a></li></ul></li></ul><h3 class="confluence-link" id="Navigation-Documentation">Documentation</h3><ul class="alternate"><li>Overview<br /><ul class="alternate"><li><a href="Architecture.html">Architecture</a></li><li><a href="Features.html">Features</a></li></ul></li><li><a href="Installation.html">Installation</a></li><li>Usage<br /><ul class="alternate"><li><a href="Javadocs.html">Java API</a></li><li><a href="Functional+testing.html">Functional testing with JUnit</a></li><li><a href="Ant+support.html">Ant tasks</a></li><li><a href="Maven2+plugin.html">Maven2/Maven3 plugin</a></li><li><a href="Cargo+Daemon.html">Cargo Daemon</a></li></ul></li><li><a href="Articles.html">Articles</a></li><li><a href="License.html">License</a></li><li><a href="Credits.html">Credits</a></li></ul><h3 id="Navigation-Containers">Containers</h3><ul class="alternate"><li>Geronimo<ul class="alternate"><li><a href="Geronimo+1.x.html">Geronimo 1.x</a></li><li><a href="Geronimo+2.x.html">Geronimo 2.x</a></li><li><a href="Geronimo+3.x.html">Geronimo 3.x</a></li></ul></li></ul><ul class="alternate"><li>Glassfish<ul class="alternate"><li><a href="Glassfish+2.x.html">Glassfish 2.x</a></li><li><a href="Glassfish+3.x.html">Glassfish 3.x</a></li><li><a href="Glassfish+4.x.html">Glassfish 4.x</a></li></ul></li></ul><ul class="alternate"><li>JBoss<ul class="alternate"><li><a href="JBoss+3.x.html">JBoss 3.x</a></li><li><a href="JBoss+4.x.html">JBoss 4.x</a></li><li><a href="JBoss+4.2.x.html">JBoss 4.2.x</a></li><li><a href="JBoss+5.x.html">JBoss 5.x</a></li><li><a href="JBoss+5.1.x.html">JBoss 5.1.x</a></li><li><a href="JBoss+6.x.html">JBoss 6.x</a></li><li><a href="JBoss+6.1.x.html">JBoss 6.1.x</a></li><li><a href="JBoss+7.x.html">JBoss 7.x</a></li><li><a href="JBoss+7.1.x.html">JBoss 7.1.x</a></li><li><a href="JBoss+7.2.x.html">JBoss 7.2.x</a></li><li><a href="JBoss+7.3.x.html">JBoss 7.3.x</a></li><li><a href="JBoss+7.4.x.html">JBoss 7.4.x</a></li></ul></li></ul><ul class="alternate"><li>Jetty<ul class="alternate"><li><a href="Jetty+4.x.html">Jetty 4.x</a></li><li><a href="Jetty+5.x.html">Jetty 5.x</a></li><li><a href="Jetty+6.x.html">Jetty 6.x</a></li><li><a href="Jetty+7.x.html">Jetty 7.x</a></li><li><a href="Jetty+8.x.html">Jetty 8.x</a></li><li><a href="Jetty+9.x.html">Jetty 9.x</a></li></ul></li></ul><ul class="alternate"><li>Jo!<ul class="alternate"><li><a href="jo+1.x.html">jo 1.x</a></li></ul></li></ul><ul class="alternate"><li>JOnAS<ul class="alternate"><li><a href="JOnAS+4.x.html">JOnAS 4.x</a></li><li><a href="JOnAS+5.x.html">JOnAS 5.x</a></li></ul></li></ul><ul class="alternate"><li>JRun<ul class="alternate"><li><a href="JRun+4.x.html">JRun 4.x</a></li></ul></li></ul><ul class="alternate"><li>Orion/OC4J<ul class="alternate"><li><a href="Oc4J+9.x.html">Oc4J 9.x</a></li><li><a href="Oc4j+10.x.html">Oc4j 10.x</a></li></ul></li></ul><ul class="alternate"><li>Resin<ul class="alternate"><li><a href="Resin+2.x.html">Resin 2.x</a></li><li><a href="Resin+3.x.html">Resin 3.x</a></li><li><a href="Resin+3.1.x.html">Resin 3.1.x</a></li><li><a href="Resin+4.x.html">Resin 4.x</a></li></ul></li></ul><ul class="alternate"><li>Tomcat<ul class="alternate"><li><a href="Tomcat+4.x.html">Tomcat 4.x</a></li><li><a href="Tomcat+5.x.html">Tomcat 5.x</a></li><li><a href="Tomcat+6.x.html">Tomcat 6.x</a></li><li><a href="Tomcat+7.x.html">Tomcat 7.x</a></li><li><a href="Tomcat+8.x.html">Tomcat 8.x</a></li></ul></li></ul><ul class="alternate"><li>TomEE<ul class="alternate"><li><a href="TomEE+1.x.html">TomEE 1.x</a></li></ul></li></ul><ul class="alternate"><li>WebLogic<br /><ul class="alternate"><li><a href="WebLogic+8.x.html">WebLogic 8.x</a></li><li><a href="WebLogic+9.x.html">WebLogic 9.x</a></li><li><a href="WebLogic+10.x.html">WebLogic 10.x</a></li><li><a href="WebLogic+10.3.x.html">WebLogic 10.3.x</a></li><li><a href="WebLogic+12.x.html">WebLogic 12.x</a></li><li><a href="WebLogic+12.1.x.html">WebLogic 12.1.x</a></li></ul></li></ul><ul class="alternate"><li>WebSphere<br /><ul class="alternate"><li><a href="WebSphere+8.5.x.html">WebSphere 8.5.x</a></li></ul></li></ul><ul class="alternate"><li>WildFly<br /><ul class="alternate"><li><a href="WildFly+8.x.html">WildFly 8.x</a></li></ul></li></ul><h3 id="Navigation-Extensions">Extensions</h3><ul class="alternate"><li><a href="Ant+support.html">Ant</a></li><li><a href="Cargo+Daemon.html">Cargo Daemon</a></li><li><a href="Maven2+plugin.html">Maven2/Maven3</a></li></ul><p>Independent extensions:</p><ul class="alternate"><li><a href="https://github.com/bmuschko/gradle-cargo-plugin" class="external-link" rel="nofollow">Gradle</a></li><li><a href="https://github.com/mulesoft/cargo-mule-container" class="external-link" rel="nofollow">Mule container</a></li></ul><h3 id="Navigation-ProjectInfo">Project Info</h3><ul class="alternate"><li><a href="Roadmap.html">Roadmap</a></li><li><a href="News.html">News</a></li><li><a href="https://jira.codehaus.org/browse/CARGO?report=com.atlassian.jira.plugin.system.project:openissues-panel" class="external-link" rel="nofollow">Issues</a></li><li><a href="https://jira.codehaus.org/browse/CARGO?report=com.atlassian.jira.plugin.system.project:changelog-panel" class="external-link" rel="nofollow">Change log</a></li><li><a href="SVN.html">SVN</a></li><li><a href="Mailing+Lists.html">Mailing Lists</a></li><li><a href="License.html">License</a></li><li><a href="Credits.html">Credits</a></li></ul><h3 id="Navigation-GetInvolved">Get Involved</h3><ul class="alternate"><li><a href="Contributing.html">Contributing</a></li><li><a href="Discussions.html">Discussions</a></li></ul><h3 id="Navigation-Development">Development</h3><ul class="alternate"><li><a href="Cargo+Code+Style.html">Cargo Code Style</a></li><li><a href="Project+Structure.html">Project Structure</a></li><li><a href="Importing+sources.html">Importing sources</a></li><li><a href="Building.html">Building</a></li><li><a href="Release+procedure.html">Release procedure</a></li><li><a href="https://semaphoreci.com/codehaus-cargo/cargo" class="external-link" rel="nofollow">Continous Integration</a><br /><a href="https://semaphoreci.com/codehaus-cargo/cargo" class="external-link" rel="nofollow"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="attachments/shields_badge.svg" data-image-src="attachments/shields_badge.svg"></span></a></li></ul>

          <h3 class="heading3">Feeds</h3>
          <table border="0" cellspacing="4px">
          <tr>
            <td align="right">
              <a href="https://codehaus-cargo.atlassian.net/wiki/collector/pages.action?key=CARGO"><img src="attachments/rss.gif" border="0"></a><br/>
            </td>
            <td align="left">
              <a href="https://codehaus-cargo.atlassian.net/wiki/collector/pages.action?key=CARGO">Site</a>
            </td>
          </tr>
          <tr>
            <td align="right">
              <a href="https://codehaus-cargo.atlassian.net/wiki/pages/viewrecentblogposts.action?key=CARGO"><img src="attachments/rss.gif" border="0"></a>
            </td>
            <td align="left">
              <a href="https://codehaus-cargo.atlassian.net/wiki/pages/viewrecentblogposts.action?key=CARGO">News</a>
            </td>
          </tr>
        </table>
      </td>
      <td id="rightColumn" valign="top">
        <script type="text/javascript">
          // Google Ads code
          google_ad_client = "ca-pub-7996505557003356";
          google_ad_slot = "5363897989";
          google_ad_width = 728;
          google_ad_height = 90;
        </script>
        <center style="padding-bottom: 1mm; margin-bottom: 2mm; border: 1px solid #eee">
          <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
          </script>
        </center>

        <h3 id="CustomFileConfigurations-CustomFileConfigurations">Custom File Configurations</h3>

<p>It is sometimes necessary to make changes to files within a Cargo standalone configuration. Normally Cargo will create this configuration and then start the server leaving the user with no chance to replace or modify these files before the server is started.</p>

<h4 id="CustomFileConfigurations-CustomConfigurationFiles">Custom Configuration Files</h4>

<p>The main reason for file changes is to make changes to configuration files to add, remove or modify configuration settings that are not yet covered by Cargo.</p>

<p>Cargo uses its own default configuration files (located within the cargo jars) which use token replacements to set the Cargo configuration options. These files can be extracted out of the jar so that modification can be made and Cargo can be instructed to use these new configuration files instead.</p>

<p>Custom tokens can also be specified in the configuration files and their values set in the cargo properties.</p>
<div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>These type of files have to be marked as a configuration file so that token replacement can be used.</p></div></div>

<h4 id="CustomFileConfigurations-OtherGenericFilesandDirectories">Other Generic Files and Directories</h4>

<p>Using the custom file configuration options you can add any files or directories into the standalone configuration home. Although this shouldn't really be necessary in most situations, it is left as an option so that if the need arises if can be used.</p>
<div class="confluence-information-macro confluence-information-macro-warning"><span class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>This is not meant to be used to deploy artifacts like a war to the server, for that you should be using a Cargo Deployer.</p></div></div>
<div class="confluence-information-macro confluence-information-macro-warning"><span class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>This is not meant to be used to add extra jars to a server's classpath, for that you should be using the extraClasspath or sharedClasspath options in Cargo.</p></div></div>

<h3 id="CustomFileConfigurations-Options">Options</h3>

<div class="table-wrap"><table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> Option Name </p></th>
<th class="confluenceTh"><p> Notes </p></th>
<th class="confluenceTh"><p> Optional </p></th>
<th class="confluenceTh"><p> Default Value </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> file </p></td>
<td class="confluenceTd"><p> This specifies the path to the file that should be used. Can also specify a directory path if a whole directory needs to be copied over. </p></td>
<td class="confluenceTd"><p> no </p></td>
<td class="confluenceTd"><p> n/a </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> todir </p></td>
<td class="confluenceTd"><p> This specified the name the directory that the file should be copied to relative to the configurations home. <br class="atl-forced-newline" />
If this is not specified, its value will be determined based on the tofile setting and if that is not specified, it will default to the configuration's home directory </p></td>
<td class="confluenceTd"><p> yes </p></td>
<td class="confluenceTd"><p> The configuration home root </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> tofile </p></td>
<td class="confluenceTd"><p> This specified the name the file to where it should be copied relative to the configurations home. This path variable can also be used to specify both the directory and file name. <br class="atl-forced-newline" />
If this is not specified, its value will be determined based on the file name of the original file </p></td>
<td class="confluenceTd"><p> yes </p></td>
<td class="confluenceTd"><p> The file name of the original file </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> configfile </p></td>
<td class="confluenceTd"><p> This specifies if the file being copied is a configuration file or not. This determines whether token replacement should be applied to the file. <br class="atl-forced-newline" />
Do not use this option when passing a file that is not an ascii file as it will corrupt the copied file. </p></td>
<td class="confluenceTd"><p> yes </p></td>
<td class="confluenceTd"><p> false </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> overwrite </p></td>
<td class="confluenceTd"><p> This specifies if the file should overwrite a file if it already exists </p></td>
<td class="confluenceTd"><p> yes </p></td>
<td class="confluenceTd"><p> true <br class="atl-forced-newline" /> </p></td>
</tr>
</tbody></table></div>

<p>Example:</p>
<div class="table-wrap"><table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"><p> file </p></th>
<th class="confluenceTh"><p> todir </p></th>
<th class="confluenceTh"><p> tofile </p></th>
<th class="confluenceTh"><p> destination file (relative to standalone configuration root) </p></th>
</tr>
<tr>
<td class="confluenceTd"><p> /tmp/server.xml </p></td>
<td class="confluenceTd"><p> conf </p></td>
<td class="confluenceTd"><p> </p></td>
<td class="confluenceTd"><p> conf/server.xml </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> /tmp/server.xml </p></td>
<td class="confluenceTd"><p> </p></td>
<td class="confluenceTd"><p> conf/server.xml </p></td>
<td class="confluenceTd"><p> conf/server.xml </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> /tmp/server.xml </p></td>
<td class="confluenceTd"><p> conf </p></td>
<td class="confluenceTd"><p> server-2.xml </p></td>
<td class="confluenceTd"><p> conf/server-2.xml </p></td>
</tr>
<tr>
<td class="confluenceTd"><p> /tmp/server.xml </p></td>
<td class="confluenceTd"><p> </p></td>
<td class="confluenceTd"><p> </p></td>
<td class="confluenceTd"><p> server.xml </p></td>
</tr>
</tbody></table></div>


<h3 id="CustomFileConfigurations-Usage">Usage</h3>

<p>Example pom.xml fragment of how to use custom file configuration.s<br />
Note in this example if  (customMessage) is set in any of the files with configfile=true it will be replaced with &quot;Hello World&quot; when it gets copied to the standalone server's directory.</p>
<div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre>
&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.codehaus.cargo.maven2&lt;/groupId&gt;
      &lt;artifactId&gt;cargo-maven2-plugin&lt;/artifactId&gt;
      &lt;configuration&gt;
        &lt;container&gt;
          &lt;containerId&gt;tomcat5x&lt;/containerId&gt;
        &lt;/container&gt;
        &lt;configuration&gt;
          &lt;files&gt;
            &lt;copy&gt;
              &lt;file&gt;/tmp/server.xml&lt;/file&gt;
              &lt;tofile&gt;conf/server.xml&lt;/tofile&gt;
              &lt;configfile&gt;true&lt;/configfile&gt;
              &lt;overwrite&gt;true&lt;/overwrite&gt;
            &lt;/copy&gt;
          &lt;/files&gt;
          &lt;properties&gt;
            &lt;customMessage&gt;Hello World&lt;/customMessage&gt;
          &lt;/properties&gt;
        &lt;/configuration&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;
</pre>
</div></div>
      </td>
    </tr>
    <tr>
      <td colspan="2" id="footer">
        <table width="100%"> 
          <tr>
            <td align="left" valign="top">
              Copyright 2004-2015. All rights reserved unless otherwise noted.<br/>
            </td>
            <td align="right" valign="top">
              Powered by <a href="https://codehaus-cargo.atlassian.net/wiki/display/CARGO/Custom+File+Configurations">Atlassian Confluence</a>.
            </td>
          </tr>
        <table>
      </td>
    </tr>
  </table>
</body>
</html>
