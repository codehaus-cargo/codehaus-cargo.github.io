<!--?xml version="1.0" encoding="utf-8"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
 <head profile="http://www.w3.org/2000/08/w3c-synd/#"> 
  <meta charset="UTF-8"> 
  <meta http-equiv="x-ua-compatible" content="IE=Edge"> 
  <link rel="stylesheet" href="attachments/site.css" type="text/css"> 
  <link rel="shortcut icon" href="attachments/favicon.ico"> 
  <link rel="icon" type="image/x-icon" href="attachments/favicon.ico"> 
  <title>Codehaus Cargo - Maven2 Plugin Tips</title> 
  <script type="text/javascript">
    if (location.href.indexOf("http://") === 0) {
      location.replace("https://" + location.href.substring(7));
    }
  </script> 
  <!-- Global site tag (gtag.js) - Google Analytics --> 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-31476258-1"></script> 
  <script>
  	window.dataLayer = window.dataLayer || [];
  	function gtag(){dataLayer.push(arguments);}
  	gtag('js', new Date());

  	gtag('config', 'UA-31476258-1');
  </script> 
 </head> 
 <body> 
  <table width="100%" class="layout" style="border-collapse:collapse"> 
   <tbody>
    <tr height="83"> 
     <td colspan="2" style="padding:0px"> 
      <div style="position:fixed;width:100%;top:0;border-bottom:1px solid #39434F;z-index:2"> 
       <table width="100%" class="banner" style="padding:0px;background-image:url('attachments/cargo-banner-center.png')"> 
        <tbody>
         <tr> 
          <td align="left" valign="middle" style="padding:0px"> <img src="attachments/cargo-banner-left.png"> </td> 
          <td align="right" valign="middle" style="padding:0px"> <img src="attachments/cargo-banner-right.png"> </td> 
         </tr> 
        </tbody>
       </table> 
      </div> </td> 
    </tr> 
    <tr> 
     <td class="leftColumn" valign="top" style="padding-top:0px"> <h3 id="Navigation-QuickLinks">Quick Links</h3>
      <ul class="alternate">
       <li><a href="Home.html">Home</a></li>
       <li><a href="Downloads.html">Downloads</a></li>
       <li><a href="Quick+start.html">Quick start</a></li>
       <li><a href="Contributing.html">How to contribute?</a>
        <ul class="alternate">
         <li><a href="Adding+a+container.html">Adding a container</a></li>
        </ul></li>
      </ul><h3 class="confluence-link" id="Navigation-Documentation">Documentation</h3>
      <ul class="alternate">
       <li>Overview<br>
        <ul class="alternate">
         <li><a href="Architecture.html">Architecture</a></li>
         <li><a href="Features.html">Features</a></li>
        </ul></li>
       <li><a href="Installation.html">Installation</a></li>
       <li>Usage<br>
        <ul class="alternate">
         <li><a href="Javadocs.html">Java API</a></li>
         <li><a href="Functional+testing.html">Functional testing with JUnit</a></li>
         <li><a href="Ant+support.html">Ant tasks</a></li>
         <li><a href="Maven2+plugin.html">Maven 2 / Maven 3 plugin</a></li>
         <li><a href="Cargo+Daemon.html">Cargo Daemon</a></li>
        </ul></li>
       <li><a href="Articles.html">Articles</a></li>
       <li><a href="License.html">License</a></li>
       <li><a href="Credits.html">Credits</a></li>
      </ul><h3 id="Navigation-Containers">Containers</h3>
      <ul class="alternate">
       <li>Geronimo
        <ul class="alternate">
         <li><a href="Geronimo+1.x.html">Geronimo 1.x</a></li>
         <li><a href="Geronimo+2.x.html">Geronimo 2.x</a></li>
         <li><a href="Geronimo+3.x.html">Geronimo 3.x</a></li>
        </ul></li>
      </ul>
      <ul class="alternate">
       <li>Glassfish
        <ul class="alternate">
         <li><a href="GlassFish+2.x.html">GlassFish 2.x</a></li>
         <li><a href="GlassFish+3.x.html">GlassFish 3.x</a></li>
         <li><a href="GlassFish+4.x.html">GlassFish 4.x</a></li>
         <li><a href="GlassFish+5.x.html">GlassFish 5.x</a></li>
        </ul></li>
      </ul>
      <ul class="alternate">
       <li>JBoss
        <ul class="alternate">
         <li><a href="JBoss+3.x.html">JBoss 3.x</a></li>
         <li><a href="JBoss+4.x.html">JBoss 4.x</a></li>
         <li><a href="JBoss+4.2.x.html">JBoss 4.2.x</a></li>
         <li><a href="JBoss+5.x.html">JBoss 5.x</a></li>
         <li><a href="JBoss+5.1.x.html">JBoss 5.1.x</a></li>
         <li><a href="JBoss+6.x.html">JBoss 6.x</a></li>
         <li><a href="JBoss+6.1.x.html">JBoss 6.1.x</a></li>
         <li><a href="JBoss+7.x.html">JBoss 7.x</a></li>
         <li><a href="JBoss+7.1.x.html">JBoss 7.1.x</a></li>
         <li><a href="JBoss+7.2.x.html">JBoss 7.2.x</a></li>
         <li><a href="JBoss+7.3.x.html">JBoss 7.3.x</a></li>
         <li><a href="JBoss+7.4.x.html">JBoss 7.4.x</a></li>
         <li><a href="JBoss+7.5.x.html">JBoss 7.5.x</a></li>
        </ul></li>
      </ul>
      <ul class="alternate">
       <li>Jetty
        <ul class="alternate">
         <li><a href="Jetty+4.x.html">Jetty 4.x</a></li>
         <li><a href="Jetty+5.x.html">Jetty 5.x</a></li>
         <li><a href="Jetty+6.x.html">Jetty 6.x</a></li>
         <li><a href="Jetty+7.x.html">Jetty 7.x</a></li>
         <li><a href="Jetty+8.x.html">Jetty 8.x</a></li>
         <li><a href="Jetty+9.x.html">Jetty 9.x</a></li>
        </ul></li>
      </ul>
      <ul class="alternate">
       <li>Jo!
        <ul class="alternate">
         <li><a href="jo+1.x.html">jo 1.x</a></li>
        </ul></li>
      </ul>
      <ul class="alternate">
       <li>JOnAS
        <ul class="alternate">
         <li><a href="JOnAS+4.x.html">JOnAS 4.x</a></li>
         <li><a href="JOnAS+5.x.html">JOnAS 5.x</a></li>
        </ul></li>
      </ul>
      <ul class="alternate">
       <li>JRun
        <ul class="alternate">
         <li><a href="JRun+4.x.html">JRun 4.x</a></li>
        </ul></li>
      </ul>
      <ul class="alternate">
       <li>Orion/OC4J
        <ul class="alternate">
         <li><a href="Oc4J+9.x.html">Oc4J 9.x</a></li>
         <li><a href="Oc4j+10.x.html">Oc4j 10.x</a></li>
        </ul></li>
      </ul>
      <ul class="alternate">
       <li>Resin
        <ul class="alternate">
         <li><a href="Resin+2.x.html">Resin 2.x</a></li>
         <li><a href="Resin+3.x.html">Resin 3.x</a></li>
         <li><a href="Resin+3.1.x.html">Resin 3.1.x</a></li>
         <li><a href="Resin+4.x.html">Resin 4.x</a></li>
        </ul></li>
      </ul>
      <ul class="alternate">
       <li>Tomcat
        <ul class="alternate">
         <li><a href="Tomcat+4.x.html">Tomcat 4.x</a></li>
         <li><a href="Tomcat+5.x.html">Tomcat 5.x</a></li>
         <li><a href="Tomcat+6.x.html">Tomcat 6.x</a></li>
         <li><a href="Tomcat+7.x.html">Tomcat 7.x</a></li>
         <li><a href="Tomcat+8.x.html">Tomcat 8.x</a></li>
         <li><a href="Tomcat+9.x.html">Tomcat 9.x</a></li>
        </ul></li>
      </ul>
      <ul class="alternate">
       <li>TomEE
        <ul class="alternate">
         <li><a href="TomEE+1.x.html">TomEE 1.x</a></li>
         <li><a href="TomEE+7.x.html">TomEE 7.x</a></li>
        </ul></li>
      </ul>
      <ul class="alternate">
       <li>WebLogic<br>
        <ul class="alternate">
         <li><a href="WebLogic+8.x.html">WebLogic 8.x</a></li>
         <li><a href="WebLogic+9.x.html">WebLogic 9.x</a></li>
         <li><a href="WebLogic+10.x.html">WebLogic 10.x</a></li>
         <li><a href="WebLogic+10.3.x.html">WebLogic 10.3.x</a></li>
         <li><a href="WebLogic+12.x.html">WebLogic 12.x</a></li>
         <li><a href="WebLogic+12.1.x.html">WebLogic 12.1.x</a></li>
         <li><a href="WebLogic+12.2.x.html">WebLogic 12.2.x</a></li>
        </ul></li>
      </ul>
      <ul class="alternate">
       <li>WebSphere<br>
        <ul class="alternate">
         <li><a href="WebSphere+8.5.x.html">WebSphere 8.5.x</a></li>
         <li><a href="WebSphere+9.x.html">WebSphere 9.x</a></li>
         <li><a href="WebSphere+Liberty.html">WebSphere Liberty</a></li>
        </ul></li>
      </ul>
      <ul class="alternate">
       <li>WildFly<br>
        <ul class="alternate">
         <li><a href="WildFly+8.x.html">WildFly 8.x</a></li>
         <li><a href="WildFly+9.x.html">WildFly 9.x</a></li>
         <li><a href="WildFly+10.x.html">WildFly 10.x</a></li>
         <li><a href="WildFly+11.x.html">WildFly 11.x</a></li>
         <li><a href="WildFly+12.x.html">WildFly 12.x</a></li>
         <li><a href="WildFly+13.x.html">WildFly 13.x</a></li>
         <li><a href="WildFly+14.x.html">WildFly 14.x</a></li>
         <li><a href="WildFly+Swarm.html">WildFly Swarm</a></li>
        </ul></li>
      </ul><h3 id="Navigation-Extensions">Extensions</h3>
      <ul class="alternate">
       <li><a href="Ant+support.html">Ant</a></li>
       <li><a href="Cargo+Daemon.html">Cargo Daemon</a></li>
       <li><a href="Maven2+plugin.html">Maven 2 / Maven 3</a></li>
      </ul><p>Independent extensions:</p>
      <ul class="alternate">
       <li><a href="https://github.com/bmuschko/gradle-cargo-plugin" class="external-link" rel="nofollow">Gradle</a></li>
       <li><a href="https://github.com/mulesoft/cargo-mule-container" class="external-link" rel="nofollow">Mule container</a></li>
      </ul><h3 id="Navigation-ProjectInfo">Project Info</h3>
      <ul class="alternate">
       <li><a href="Roadmap.html">Roadmap</a></li>
       <li><a href="News.html">News</a></li>
       <li><a href="https://codehaus-cargo.atlassian.net/projects/CARGO/issues" class="external-link" rel="nofollow">Issues</a></li>
       <li><a href="https://codehaus-cargo.atlassian.net/projects/CARGO?selectedItem=com.atlassian.jira.jira-projects-plugin:release-page" class="external-link" rel="nofollow">Change log</a></li>
       <li><a href="Source+code.html">Source code</a></li>
       <li><a href="Mailing+Lists.html">Mailing lists</a></li>
       <li><a href="License.html">License</a></li>
       <li><a href="Credits.html">Credits</a></li>
      </ul><h3 id="Navigation-Development">Development</h3>
      <ul class="alternate">
       <li><a href="Project+Structure.html">Project structure</a></li>
       <li><a href="Importing+sources.html">Importing sources</a></li>
       <li><a href="Building.html">Building</a></li>
       <li><a href="Cargo+Code+Style.html">Code style</a></li>
       <li><a href="Contributing.html">Contributing</a></li>
       <li><a href="Release+procedure.html">Release procedure</a></li>
       <li><a href="https://semaphoreci.com/codehaus-cargo/cargo" class="external-link" rel="nofollow">Continous integration</a><br><a href="https://semaphoreci.com/codehaus-cargo/cargo" class="external-link" rel="nofollow"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="https://semaphoreci.com/api/v1/projects/f1caf210-ca6e-44f7-b54c-16ad92065416/393658/shields_badge.svg" data-image-src="https://semaphoreci.com/api/v1/projects/f1caf210-ca6e-44f7-b54c-16ad92065416/393658/shields_badge.svg"></span></a></li>
      </ul> <h3 class="heading3">Feeds</h3> 
      <table border="0" cellspacing="4px"> 
       <tbody>
        <tr> 
         <td align="right"> <a href="https://codehaus-cargo.atlassian.net/wiki/collector/pages.action?key=CARGO"><img src="attachments/rss.gif" border="0"></a><br> </td> 
         <td align="left"> <a href="https://codehaus-cargo.atlassian.net/wiki/collector/pages.action?key=CARGO">Site</a> </td> 
        </tr> 
        <tr> 
         <td align="right"> <a href="https://codehaus-cargo.atlassian.net/wiki/pages/viewrecentblogposts.action?key=CARGO"><img src="attachments/rss.gif" border="0"></a> </td> 
         <td align="left"> <a href="https://codehaus-cargo.atlassian.net/wiki/pages/viewrecentblogposts.action?key=CARGO">News</a> </td> 
        </tr> 
       </tbody>
      </table> </td> 
     <td valign="top" style="padding:0px"> 
      <table width="100%" style="border-collapse:collapse"> 
       <tbody>
        <tr> 
         <td class="breadcrumbs" style="padding:10px 17px"> 
          <table width="100%"> 
           <tbody>
            <tr valign="top"> 
             <td align="left"> <b><a href="Home.html">Codehaus Cargo</a> &gt; <a href="Features.html">Features</a> &gt; <a href="Extensions.html">Extensions</a> &gt; <a href="Maven2+plugin.html">Maven2 plugin</a> &gt; Maven2 Plugin Tips</b> </td> 
             <td align="right" width="300"> 
              <form method="GET" action="Search.html"> 
               <input type="text" size="30" name="q" id="search_query"> &nbsp; 
               <input type="submit" value="Search"> 
              </form> </td> 
            </tr> 
           </tbody>
          </table> </td> 
        </tr> 
        <tr> 
         <td class="rightColumn"> 
          <h1 id="Maven2PluginTips-Tips">Tips</h1>
          <ul>
           <li><a href="#Maven2PluginTips-tip1">Starting mutiple containers conditionally</a></li>
           <li><a href="#Maven2PluginTips-tip2">Starting Tomcat in security mode</a></li>
           <li><a href="#Maven2PluginTips-tip3">How to get Tomcat 5 working with the Java 5 XML Parsers</a></li>
           <li><a href="Installer.html#Installer-installer_with_maven2_dependencies">How to use the ZIP or TAR.GZ distributions provided by servers on a Maven2 repository</a></li>
           <li><a href="#Maven2PluginTips-tip4">How to run Jetty under a Java Security Manager</a></li>
          </ul><p><span class="confluence-anchor-link conf-macro output-inline" id="Maven2PluginTips-tip1" data-hasbody="false" data-macro-name="anchor"> </span></p><h2 id="Maven2PluginTips-Startingmultiplecontainersconditionally">Starting multiple containers conditionally</h2><p>Maven 2 / Maven 3&nbsp;supports the notion of <a href="http://maven.apache.org/guides/introduction/introduction-to-profiles.html" class="external-link" rel="nofollow">profiles</a> which can be used with Cargo to decide for example when to run tests on a specific container. Here's how you could use the Cargo&nbsp;Maven 2 / Maven 3 plugin to that effect:</p>
          <div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code">
           <div class="codeContent panelContent pdl"> 
            <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: xml; gutter: false; theme: Confluence" data-theme="Confluence">&lt;project&gt;
[...]
  &lt;profiles&gt;
    &lt;profile&gt;
      &lt;id&gt;tomcat5x&lt;/id&gt;
      &lt;build&gt;
        &lt;plugins&gt;
          &lt;plugin&gt;
            &lt;groupId&gt;org.codehaus.cargo&lt;/groupId&gt;
            &lt;artifactId&gt;cargo-maven2-plugin&lt;/artifactId&gt;
            &lt;configuration&gt;
              &lt;container&gt;
                &lt;containerId&gt;tomcat5x&lt;/containerId&gt;
                &lt;zipUrlInstaller&gt;
                  &lt;url&gt;http://www.apache.org/dist/jakarta/tomcat-5/v5.0.30/bin/jakarta-tomcat-5.0.30.zip&lt;/url&gt;
                  &lt;downloadDir&gt;${project.build.directory}/downloads&lt;/downloadDir&gt;
                  &lt;extractDir&gt;${project.build.directory}/extracts&lt;/extractDir&gt;
                &lt;/zipUrlInstaller&gt;
              &lt;/container&gt;
              &lt;configuration&gt;
                &lt;home&gt;${project.build.directory}/tomcat5x/container&lt;/home&gt;
              &lt;/configuration&gt;
            &lt;/configuration&gt;
            &lt;executions&gt;
              &lt;execution&gt;
                &lt;id&gt;start-container&lt;/id&gt;
                &lt;phase&gt;pre-integration-test&lt;/phase&gt;
                &lt;goals&gt;
                  &lt;goal&gt;start&lt;/goal&gt;
                &lt;/goals&gt;
              &lt;/execution&gt;
              &lt;execution&gt;
                &lt;id&gt;stop-container&lt;/id&gt;
                &lt;phase&gt;post-integration-test&lt;/phase&gt;
                &lt;goals&gt;
                  &lt;goal&gt;stop&lt;/goal&gt;
                &lt;/goals&gt;
              &lt;/execution&gt;
            &lt;/executions&gt;
          &lt;/plugin&gt;
        &lt;/plugins&gt;
      &lt;/build&gt;
    &lt;/profile&gt;
    &lt;profile&gt;
      &lt;id&gt;orion2x&lt;/id&gt;
      &lt;build&gt;
        &lt;plugins&gt;
          &lt;plugin&gt;
            &lt;groupId&gt;org.codehaus.cargo&lt;/groupId&gt;
            &lt;artifactId&gt;cargo-maven2-plugin&lt;/artifactId&gt;
            &lt;configuration&gt;
              &lt;container&gt;
                &lt;containerId&gt;orion2x&lt;/containerId&gt;
                &lt;zipUrlInstaller&gt;
                  &lt;url&gt;http://www.orionserver.com/distributions/orion2.0.5.zip&lt;/url&gt;
                  &lt;downloadDir&gt;${project.build.directory}/downloads&lt;/downloadDir&gt;
                  &lt;extractDir&gt;${project.build.directory}/extracts&lt;/extractDir&gt;
                &lt;/zipUrlInstaller&gt;
              &lt;/container&gt;
              &lt;configuration&gt;
                &lt;home&gt;${project.build.directory}/orion2x/container&lt;/home&gt;
              &lt;/configuration&gt;
            &lt;/configuration&gt;
            &lt;executions&gt;
              &lt;execution&gt;
                &lt;id&gt;start-container&lt;/id&gt;
                &lt;phase&gt;pre-integration-test&lt;/phase&gt;
                &lt;goals&gt;
                  &lt;goal&gt;start&lt;/goal&gt;
                &lt;/goals&gt;
              &lt;/execution&gt;
              &lt;execution&gt;
                &lt;id&gt;stop-container&lt;/id&gt;
                &lt;phase&gt;post-integration-test&lt;/phase&gt;
                &lt;goals&gt;
                  &lt;goal&gt;stop&lt;/goal&gt;
                &lt;/goals&gt;
              &lt;/execution&gt;
            &lt;/executions&gt;
          &lt;/plugin&gt;
        &lt;/plugins&gt;
      &lt;/build&gt;
    &lt;/profile&gt;
  &lt;/profiles&gt;
&lt;/project&gt;
</pre> 
           </div>
          </div><p>Then to start the tomcat 5.x container you would type <code>mvn -P tomcat5x install</code>. if you want to start both containers you would type <code>mvn -P tomcat5x,orion2x install</code>.</p><p>If you want to define a profile as the default you can use the <code>&lt;activation&gt;</code> element with an activation strategy. For example if you want a profile to be always on, use:</p>
          <div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code">
           <div class="codeContent panelContent pdl"> 
            <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: xml; gutter: false; theme: Confluence" data-theme="Confluence">&lt;profiles&gt;
    &lt;profile&gt;
      &lt;id&gt;tomcat5x&lt;/id&gt;
      &lt;activation&gt;
        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
       &lt;/activation&gt;
[...]
</pre> 
           </div>
          </div><p><span class="confluence-anchor-link conf-macro output-inline" id="Maven2PluginTips-tip2" data-hasbody="false" data-macro-name="anchor"> </span></p><h2 id="Maven2PluginTips-StartingTomcatinsecuritymode">Starting Tomcat in security mode</h2><p><span style="color: rgb(255,0,0);">Warning: the proposed solution only works on Linux, see</span>&nbsp;<a href="https://issues.apache.org/jira/browse/MNG-6437" class="external-link" rel="nofollow">MNG-6437</a></p><p>Cargo supports passing system properties <a href="Passing+system+properties.html">Passing system properties</a>. So, to start Tomcat in security mode, you need to specify two system properties:</p>
          <ul>
           <li>java.security.manager</li>
           <li>java.security.policy</li>
          </ul><p>For instance,</p>
          <div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code">
           <div class="codeContent panelContent pdl"> 
            <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: xml; gutter: false; theme: Confluence" data-theme="Confluence">[...]
  &lt;plugins&gt;
    [...]
    &lt;plugin&gt;
      &lt;groupId&gt;org.codehaus.cargo&lt;/groupId&gt;
      &lt;artifactId&gt;cargo-maven2-plugin&lt;/artifactId&gt;
      &lt;configuration&gt;
        &lt;container&gt;
          &lt;containerId&gt;tomcat5x&lt;/containerId&gt;
          &lt;home&gt;${catalina.home}&lt;/home&gt;
          [...]
          &lt;systemProperties&gt;
            &lt;java.security.manager&gt;default&lt;/java.security.manager&gt;
            &lt;java.security.policy&gt;${catalina.home}\conf\catalina.policy&lt;/java.security.policy&gt;
          &lt;/systemProperties&gt;
        &lt;/container&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
    [...]
  &lt;/plugins&gt;
[...]
</pre> 
           </div>
          </div><p><span class="confluence-anchor-link conf-macro output-inline" id="Maven2PluginTips-tip3" data-hasbody="false" data-macro-name="anchor"> </span></p><script type="text/javascript">
  // Google Ads code
  google_ad_client = "ca-pub-7996505557003356";
  google_ad_slot = "5363897989";
  google_ad_width = 728;
  google_ad_height = 90;
</script>
          <center style="padding-bottom: 1mm; margin-bottom: 2mm; border: 1px solid #eee"> 
           <script type="text/javascript" src="https://pagead2.googlesyndication.com/pagead/show_ads.js">
  </script> 
          </center><h2 id="Maven2PluginTips-HowtogetTomcat5workingwiththeJava5XMLParsers">How to get Tomcat 5 working with the Java 5 XML Parsers</h2><p><strong>Tip submitted by Ben P.</strong></p><p>Imagine that you have some XML jars in the <code>common/endorsed</code> folder of Tomcat and you have edited your <code>catalina.bat</code> file to specify some extra JVM opts to specify the XML parser. Here's how to achieve the same using Cargo:</p>
          <div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code">
           <div class="codeContent panelContent pdl"> 
            <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: xml; gutter: false; theme: Confluence" data-theme="Confluence">&lt;plugin&gt;
  &lt;groupId&gt;org.codehaus.cargo&lt;/groupId&gt;
  &lt;artifactId&gt;cargo-maven2-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;container&gt;
      &lt;containerId&gt;tomcat5x&lt;/containerId&gt;
      &lt;home&gt;${tomcat.home}&lt;/home&gt;
      &lt;dependencies&gt;
        &lt;dependency&gt;
          &lt;location&gt;${tomcat.home}/common/endorsed/xalan.jar&lt;/location&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
          &lt;location&gt;${tomcat.home}/common/endorsed/xercesImpl.jar&lt;/location&gt;
        &lt;/dependency&gt;
      &lt;/dependencies&gt;
      &lt;systemProperties&gt;
        &lt;javax.xml.parsers.DocumentBuilderFactory&gt;
          org.apache.xerces.jaxp.DocumentBuilderFactoryImpl
        &lt;/javax.xml.parsers.DocumentBuilderFactory&gt;
        &lt;javax.xml.parsers.SAXParserFactory&gt;
          org.apache.xerces.jaxp.SAXParserFactoryImpl
        &lt;/javax.xml.parsers.SAXParserFactory&gt;
      &lt;/systemProperties&gt;
    &lt;/container&gt;
    &lt;configuration&gt;
      &lt;type&gt;existing&lt;/type&gt;
      &lt;home&gt;${tomcat.home}&lt;/home&gt;
    &lt;/configuration&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;
</pre> 
           </div>
          </div><p>This shows how to add classpath elements to a Cargo container using the <code>&lt;dependencies&gt;</code> element.</p><p><span class="confluence-anchor-link conf-macro output-inline" id="Maven2PluginTips-tip4" data-hasbody="false" data-macro-name="anchor"> </span></p><h2 id="Maven2PluginTips-HowtorunaJettywebappunderaJavaSecurityManager">How to run a Jetty webapp under a Java Security Manager</h2><p><strong>Tip submitted by Claude Brisson</strong></p><p><span style="color: rgb(255,0,0);"><strong>UPDATE: This solution doesn't work on Windows for now:&nbsp;@cargo.repository@, @cargo.container@ and&nbsp;<span style="color: rgb(255,0,0);"><strong>@cargo.webapp@</strong></span>&nbsp;should be URIs and not paths</strong></span></p><p><a href="Jetty+8.x.html">Jetty 8.x</a> has its own security manager, which can be enabled by enabling the&nbsp;<code>jetty-policy.xml</code>&nbsp;module, but it will search for its policies files under a <code>lib/policy</code>&nbsp;directory located in the same location as <code>start.jar</code>, inaccessible to Cargo's custom configuration folders.</p><p>So we'll stick to the&nbsp;<a href="Jetty+9.x.html">Jetty 9.x</a> container. In&nbsp;<a href="Jetty+9.x.html">Jetty 9.x</a> there is no internal security manager, so we'll directly run&nbsp;<a href="Jetty+9.x.html">Jetty 9.x</a> under the standard&nbsp;<code>java.lang.SecurityManager</code>.</p><p>We'll first need a <code>mywebapp.policy</code>&nbsp;policy file. It gives rights to Jetty itself:</p>
          <div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"> 
           <div class="codeHeader panelHeader pdl hide-border-bottom" style="border-bottom-width: 1px;"> 
            <b class=" code-title">src/main/policy/mywebapp.policy</b> 
            <span class="collapse-source expand-control" style="display:none;"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">Expand source</span></span> 
            <span class="collapse-spinner-wrapper"> </span> 
           </div> 
           <div class="codeContent panelContent pdl hide-toolbar"> 
            <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence; collapse: true" data-theme="Confluence">///////////////////////////////////////////////////
//
// Give Maven repository libs all permissions
//
///////////////////////////////////////////////////

grant codeBase "file:@cargo.repository@/-"
{
    permission java.security.AllPermission "", "";
};

///////////////////////////////////////////////////
//
// Give Jetty libs all permissions
//
///////////////////////////////////////////////////

grant codeBase "file:@cargo.container@/-"
{
    permission java.security.AllPermission "", "";
};

///////////////////////////////////////////////////
//
// Give anyone basic and reflection runtime rights
//
///////////////////////////////////////////////////

grant
{
    permission java.lang.RuntimePermission "accessDeclaredMembers";
    permission java.lang.RuntimePermission "getProtectionDomain";
    permission java.lang.RuntimePermission "getClassLoader";
};

///////////////////////////////////////////////////
//
// Let webapp resolve classes dependencies
//
///////////////////////////////////////////////////

grant codeBase "file:@cargo.webapp@/WEB-INF/classes/-"
{
    permission java.io.FilePermission "@cargo.webapp@/WEB-INF/lib/*", "read";
    permission java.io.FilePermission "@cargo.webapp@/WEB-INF/classes/-", "read";
};

grant codeBase "file:@cargo.webapp@/WEB-INF/lib/*"
{
    permission java.io.FilePermission "@cargo.webapp@/WEB-INF/lib/*", "read";
    permission java.io.FilePermission "@cargo.webapp@/WEB-INF/classes/-", "read";
};

///////////////////////////////////////////////////
//
// Let mywebapp be given appropriate rights
//
///////////////////////////////////////////////////

grant codeBase "file:@cargo.webapp@/WEB-INF/lib/mywebapp.jar"
{
    // ...
};</pre> 
           </div> 
          </div><p>... and then configure appropriately the Cargo Maven2/Maven3 plugin:</p>
          <div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code">
           <div class="codeContent panelContent pdl"> 
            <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">&lt;plugin&gt;
    &lt;groupId&gt;org.codehaus.cargo&lt;/groupId&gt;
    &lt;artifactId&gt;cargo-maven2-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.6.8&lt;/version&gt;
    &lt;configuration&gt;
        &lt;container&gt;
            &lt;containerId&gt;jetty9x&lt;/containerId&gt;
        &lt;/container&gt;
        &lt;configuration&gt;
            &lt;files&gt;
                &lt;copy&gt;
                    &lt;file&gt;${project.basedir}/src/main/policy/showcase.policy&lt;/file&gt;
                    &lt;todir&gt;/&lt;/todir&gt;
                    &lt;configfile&gt;true&lt;/configfile&gt;
                &lt;/copy&gt;
            &lt;/files&gt;
            &lt;properties&gt;
                &lt;cargo.container&gt;${project.build.directory}/cargo/installs&lt;/cargo.container&gt;
                &lt;cargo.repository&gt;${settings.localRepository}&lt;/cargo.repository&gt;
                &lt;cargo.webapp&gt;${project.build.directory}/${project.artifactId}&lt;/cargo.webapp&gt;
                &lt;cargo.slf4j.version&gt;${slf4j.version}&lt;/cargo.slf4j.version&gt;
                &lt;cargo.jvmargs&gt;
                    &lt;!-- enable security manager --&gt;
                    -Djava.security.manager
                    -Djava.security.policy=${project.build.directory}/cargo/configurations/jetty9x/my_webapp.policy
                &lt;/cargo.jvmargs&gt;
            &lt;/properties&gt;
        &lt;/configuration&gt;
    &lt;/configuration&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;configuration&gt;
                &lt;wait&gt;false&lt;/wait&gt;
            &lt;/configuration&gt;
            &lt;id&gt;start-server&lt;/id&gt;
            &lt;goals&gt;
                &lt;goal&gt;start&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;phase&gt;pre-integration-test&lt;/phase&gt;
        &lt;/execution&gt;
        &lt;execution&gt;
            &lt;id&gt;stop-server&lt;/id&gt;
            &lt;goals&gt;
                &lt;goal&gt;stop&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;phase&gt;post-integration-test&lt;/phase&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;</pre> 
           </div>
          </div> </td> 
        </tr> 
       </tbody>
      </table> </td> 
    </tr> 
    <tr height="23"> 
     <td colspan="2" style="padding:0px"> 
      <div style="position:fixed;width:100%;height:23px;bottom:0;border-top:1px solid #39434F;z-index:2;background-color:#FFFFFF"> 
       <table width="100%"> 
        <tbody>
         <tr valign="top"> 
          <td align="left"> Copyright 2004-2018. All rights reserved unless otherwise noted.<br> </td> 
          <td align="right"> <a href="Cookies.html">Click here to read our privacy and cookie policy</a> </td> 
         </tr> 
        </tbody>
       </table> 
      </div> </td> 
    </tr> 
   </tbody>
  </table>   
 </body>
</html>